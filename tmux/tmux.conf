# https://github.com/davidandradeduarte/dotfiles/blob/main/common/.tmux.conf

# -r means that the bind can repeat without entering prefix again
# -n means that the bind doesn't use the prefix

# Set default command to execute. Normally this does not have to be set, but is set here to circumvet strange issue on macOS where a loginshell with zsh starts with $?=1. TODO remove this when this mysterious bug has disappeared.
# set-option -g default-command $SHELL

# set -g  default-terminal "tmux-256color"
# set-option -ga terminal-overrides ',xterm-256color:Tc'

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-online-status'

# Load components 
source-file "~/.dotfiles/tmux/ui.tmux"
source-file "~/.dotfiles/tmux/keybinds.tmux"

# Mouse mode
set -g mouse on

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows after window is closed
set-option -g renumber-windows on

# Stop the windows from renaming themselves
set-option -g allow-rename off

# Edit configuration and reload
bind C-e new-window -n 'tmux.conf' "sh -c '\${EDITOR:-nvim} ~/.tmux/tmux.conf && tmux source ~/.tmux/tmux.conf && tmux display \"Config reloaded\"'"

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'